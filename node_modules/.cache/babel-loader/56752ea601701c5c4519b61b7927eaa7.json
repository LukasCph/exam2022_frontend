{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Lukas/OneDrive/Documents/Sem3/exam2022/exam2022_frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Lukas/OneDrive/Documents/Sem3/exam2022/exam2022_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/Lukas/OneDrive/Documents/Sem3/exam2022/exam2022_frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Lukas/OneDrive/Documents/Sem3/exam2022/exam2022_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Lukas/OneDrive/Documents/Sem3/exam2022/exam2022_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useState}from'react';// Facade\nimport{facade}from'../../apiFacade';import{signup}from'../../settings';// Styles\nimport{Wrapper,StyledFormWrapper,StyledForm,StyledInput,StyledButton,StyledError}from'./Signup.styles';//Router\nimport{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(_ref){var setLoginCredentials=_ref.setLoginCredentials,setLoggedIn=_ref.setLoggedIn;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),signupCredentials=_useState4[0],setSignupCredentials=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(e){setSignupCredentials(_objectSpread(_objectSpread({},signupCredentials),{},_defineProperty({},e.target.id,e.target.value)));// console.log(signupCredentials);\n};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return facade.signup(signupCredentials.username,signupCredentials.password);case 3:response=_context.sent;if(response.status==='success'){facade.login(signupCredentials.username,signupCredentials.password).then(function(){if(sessionStorage.getItem('username')&&facade.loggedIn){setLoginCredentials(signupCredentials);setLoggedIn(true);navigate('/');}});}case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsx(StyledFormWrapper,{children:/*#__PURE__*/_jsxs(StyledForm,{children:[/*#__PURE__*/_jsx(StyledInput,{placeholder:\"User Name\",id:\"username\",onChange:handleChange}),/*#__PURE__*/_jsx(StyledInput,{placeholder:\"Password\",type:\"password\",id:\"password\",onChange:handleChange}),response.message&&/*#__PURE__*/_jsx(StyledError,{children:/*#__PURE__*/_jsx(\"p\",{children:response.message})}),/*#__PURE__*/_jsx(StyledButton,{onClick:handleSubmit,children:\"Sign up\"})]})})});}export default Signup;","map":{"version":3,"sources":["C:/Users/Lukas/OneDrive/Documents/Sem3/exam2022/exam2022_frontend/src/components/Signup/index.js"],"names":["axios","React","useState","facade","signup","Wrapper","StyledFormWrapper","StyledForm","StyledInput","StyledButton","StyledError","useNavigate","Signup","setLoginCredentials","setLoggedIn","response","setResponse","signupCredentials","setSignupCredentials","navigate","handleChange","e","target","id","value","handleSubmit","preventDefault","username","password","status","login","then","sessionStorage","getItem","loggedIn","message"],"mappings":"kuBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA;AACA,OAASC,MAAT,KAAuB,iBAAvB,CACA,OAASC,MAAT,KAAuB,gBAAvB,CAEA;AACA,OACEC,OADF,CAEEC,iBAFF,CAGEC,UAHF,CAIEC,WAJF,CAKEC,YALF,CAMEC,WANF,KAOO,iBAPP,CASA;AACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,QAASC,CAAAA,MAAT,MAAsD,IAApCC,CAAAA,mBAAoC,MAApCA,mBAAoC,CAAfC,WAAe,MAAfA,WAAe,CACpD,cAAgCZ,QAAQ,CAAC,EAAD,CAAxC,wCAAOa,QAAP,eAAiBC,WAAjB,eACA,eAAkDd,QAAQ,CAAC,EAAD,CAA1D,yCAAOe,iBAAP,eAA0BC,oBAA1B,eACA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA,GAAMS,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BH,oBAAoB,gCACfD,iBADe,wBAEjBI,CAAC,CAACC,MAAF,CAASC,EAFQ,CAEHF,CAAC,CAACC,MAAF,CAASE,KAFN,GAApB,CAIA;AACD,CAND,CAQA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOJ,CAAP,+HACnBA,CAAC,CAACK,cAAF,GADmB,sBAEIvB,CAAAA,MAAM,CAACC,MAAP,CAAca,iBAAiB,CAACU,QAAhC,CAA0CV,iBAAiB,CAACW,QAA5D,CAFJ,QAEbb,QAFa,eAGjB,GAAIA,QAAQ,CAACc,MAAT,GAAoB,SAAxB,CAAmC,CACjC1B,MAAM,CACH2B,KADH,CACSb,iBAAiB,CAACU,QAD3B,CACqCV,iBAAiB,CAACW,QADvD,EAEGG,IAFH,CAEQ,UAAM,CACV,GAAIC,cAAc,CAACC,OAAf,CAAuB,UAAvB,GAAsC9B,MAAM,CAAC+B,QAAjD,CAA2D,CACzDrB,mBAAmB,CAACI,iBAAD,CAAnB,CACAH,WAAW,CAAC,IAAD,CAAX,CACAK,QAAQ,CAAC,GAAD,CAAR,CACD,CACF,CARH,EASD,CAbgB,sDAAH,kBAAZM,CAAAA,YAAY,6CAAlB,CAgBA,mBACE,KAAC,OAAD,wBACE,KAAC,iBAAD,wBACE,MAAC,UAAD,yBACE,KAAC,WAAD,EACE,WAAW,CAAC,WADd,CAEE,EAAE,CAAC,UAFL,CAGE,QAAQ,CAAEL,YAHZ,EADF,cAME,KAAC,WAAD,EACE,WAAW,CAAC,UADd,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,QAAQ,CAAEA,YAJZ,EANF,CAYGL,QAAQ,CAACoB,OAAT,eACC,KAAC,WAAD,wBACE,mBAAIpB,QAAQ,CAACoB,OAAb,EADF,EAbJ,cAiBE,KAAC,YAAD,EAAc,OAAO,CAAEV,YAAvB,qBAjBF,GADF,EADF,EADF,CAyBD,CAED,cAAeb,CAAAA,MAAf","sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react';\r\n\r\n// Facade\r\nimport { facade } from '../../apiFacade';\r\nimport { signup } from '../../settings';\r\n\r\n// Styles\r\nimport {\r\n  Wrapper,\r\n  StyledFormWrapper,\r\n  StyledForm,\r\n  StyledInput,\r\n  StyledButton,\r\n  StyledError,\r\n} from './Signup.styles';\r\n\r\n//Router\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Signup({ setLoginCredentials, setLoggedIn }) {\r\n  const [response, setResponse] = useState('');\r\n  const [signupCredentials, setSignupCredentials] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setSignupCredentials({\r\n      ...signupCredentials,\r\n      [e.target.id]: e.target.value,\r\n    });\r\n    // console.log(signupCredentials);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const response = await facade.signup(signupCredentials.username, signupCredentials.password);\r\n      if (response.status === 'success') {\r\n        facade\r\n          .login(signupCredentials.username, signupCredentials.password)\r\n          .then(() => {\r\n            if (sessionStorage.getItem('username') && facade.loggedIn) {\r\n              setLoginCredentials(signupCredentials);\r\n              setLoggedIn(true);\r\n              navigate('/');\r\n            }\r\n          });\r\n      }\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledFormWrapper>\r\n        <StyledForm>\r\n          <StyledInput\r\n            placeholder=\"User Name\"\r\n            id=\"username\"\r\n            onChange={handleChange}\r\n          />\r\n          <StyledInput\r\n            placeholder=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            onChange={handleChange}\r\n          />\r\n          {response.message && (\r\n            <StyledError>\r\n              <p>{response.message}</p>\r\n            </StyledError>\r\n          )}\r\n          <StyledButton onClick={handleSubmit}>Sign up</StyledButton>\r\n        </StyledForm>\r\n      </StyledFormWrapper>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n"]},"metadata":{},"sourceType":"module"}