{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from\"axios\";// Facade\nimport{facade}from\"../../apiFacade\";// Styles\nimport{Wrapper,StyledFormWrapper,StyledForm,StyledInput,StyledButton,StyledError}from\"./Login.styles\";// Urls\n// Router\nimport{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={username:\"\",password:\"\"};var Login=function Login(_ref){var setLoggedIn=_ref.setLoggedIn,loginCredentials=_ref.loginCredentials,setLoginCredentials=_ref.setLoginCredentials;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var perfomLogin=function perfomLogin(e){e.preventDefault();setError(\"\");for(var key in loginCredentials){if(loginCredentials[key]===\"\"){setError(\"\".concat(key,\" skal v\\xE6re udfyldt\"));return;}}login(loginCredentials.username,loginCredentials.password);};var onChange=function onChange(e){setLoginCredentials(_objectSpread(_objectSpread({},loginCredentials),{},_defineProperty({},e.currentTarget.id,e.currentTarget.value)));};var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user,pass){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return facade.login(user,pass).then(function(res){setLoggedIn(facade.loggedIn());if(facade.loggedIn()){navigate(\"/\");}else{setError(\"Invalid username or password\");setLoginCredentials(initialState);}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function login(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsx(StyledFormWrapper,{children:/*#__PURE__*/_jsxs(StyledForm,{children:[/*#__PURE__*/_jsx(StyledInput,{placeholder:\"User Name\",id:\"username\",onChange:onChange,value:loginCredentials.username}),/*#__PURE__*/_jsx(StyledInput,{placeholder:\"Password\",type:\"password\",id:\"password\",value:loginCredentials.password,onChange:onChange}),error&&/*#__PURE__*/_jsx(StyledError,{children:/*#__PURE__*/_jsx(\"p\",{children:error})}),/*#__PURE__*/_jsx(StyledButton,{onClick:perfomLogin,children:\"Login\"})]})})});};export default Login;","map":{"version":3,"sources":["C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/src/components/Login/index.js"],"names":["React","useState","axios","facade","Wrapper","StyledFormWrapper","StyledForm","StyledInput","StyledButton","StyledError","useNavigate","initialState","username","password","Login","setLoggedIn","loginCredentials","setLoginCredentials","navigate","error","setError","perfomLogin","e","preventDefault","key","login","onChange","currentTarget","id","value","user","pass","then","res","loggedIn"],"mappings":"+rBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,OAASC,MAAT,KAAuB,iBAAvB,CAEA;AACA,OACEC,OADF,CAEEC,iBAFF,CAGEC,UAHF,CAIEC,WAJF,CAKEC,YALF,CAMEC,WANF,KAOO,gBAPP,CASA;AAEA;AACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,QAAQ,CAAE,EADS,CAEnBC,QAAQ,CAAE,EAFS,CAArB,CAKA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAIR,IAHJC,CAAAA,WAGI,MAHJA,WAGI,CAFJC,gBAEI,MAFJA,gBAEI,CADJC,mBACI,MADJA,mBACI,CACJ,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,cAA0BT,QAAQ,CAAC,EAAD,CAAlC,wCAAOkB,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CACzBA,CAAC,CAACC,cAAF,GACAH,QAAQ,CAAC,EAAD,CAAR,CACA,IAAK,GAAII,CAAAA,GAAT,GAAgBR,CAAAA,gBAAhB,CAAkC,CAChC,GAAIA,gBAAgB,CAACQ,GAAD,CAAhB,GAA0B,EAA9B,CAAkC,CAChCJ,QAAQ,WAAII,GAAJ,0BAAR,CACA,OACD,CACF,CAEDC,KAAK,CAACT,gBAAgB,CAACJ,QAAlB,CAA4BI,gBAAgB,CAACH,QAA7C,CAAL,CACD,CAXD,CAYA,GAAMa,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACJ,CAAD,CAAO,CACtBL,mBAAmB,gCACdD,gBADc,wBAEhBM,CAAC,CAACK,aAAF,CAAgBC,EAFA,CAEKN,CAAC,CAACK,aAAF,CAAgBE,KAFrB,GAAnB,CAID,CALD,CAOA,GAAMJ,CAAAA,KAAK,2FAAG,iBAAOK,IAAP,CAAaC,IAAb,wIACN5B,CAAAA,MAAM,CAACsB,KAAP,CAAaK,IAAb,CAAmBC,IAAnB,EAAyBC,IAAzB,CAA8B,SAACC,GAAD,CAAS,CAC3ClB,WAAW,CAACZ,MAAM,CAAC+B,QAAP,EAAD,CAAX,CACA,GAAI/B,MAAM,CAAC+B,QAAP,EAAJ,CAAuB,CACrBhB,QAAQ,CAAC,GAAD,CAAR,CACD,CAFD,IAEO,CACLE,QAAQ,CAAC,8BAAD,CAAR,CACAH,mBAAmB,CAACN,YAAD,CAAnB,CACD,CACF,CARK,CADM,uDAAH,kBAALc,CAAAA,KAAK,iDAAX,CAYA,mBACE,KAAC,OAAD,wBACE,KAAC,iBAAD,wBACE,MAAC,UAAD,yBACE,KAAC,WAAD,EACE,WAAW,CAAC,WADd,CAEE,EAAE,CAAC,UAFL,CAGE,QAAQ,CAAEC,QAHZ,CAIE,KAAK,CAAEV,gBAAgB,CAACJ,QAJ1B,EADF,cAOE,KAAC,WAAD,EACE,WAAW,CAAC,UADd,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,KAAK,CAAEI,gBAAgB,CAACH,QAJ1B,CAKE,QAAQ,CAAEa,QALZ,EAPF,CAcGP,KAAK,eACJ,KAAC,WAAD,wBACE,mBAAIA,KAAJ,EADF,EAfJ,cAmBE,KAAC,YAAD,EAAc,OAAO,CAAEE,WAAvB,mBAnBF,GADF,EADF,EADF,CA2BD,CAlED,CAoEA,cAAeP,CAAAA,KAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n// Facade\r\nimport { facade } from \"../../apiFacade\";\r\n\r\n// Styles\r\nimport {\r\n  Wrapper,\r\n  StyledFormWrapper,\r\n  StyledForm,\r\n  StyledInput,\r\n  StyledButton,\r\n  StyledError,\r\n} from \"./Login.styles\";\r\n\r\n// Urls\r\n\r\n// Router\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst initialState = {\r\n  username: \"\",\r\n  password: \"\",\r\n};\r\n\r\nconst Login = ({\r\n  setLoggedIn,\r\n  loginCredentials,\r\n  setLoginCredentials,\r\n}) => {\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const perfomLogin = (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    for (let key in loginCredentials) {\r\n      if (loginCredentials[key] === \"\") {\r\n        setError(`${key} skal vÃ¦re udfyldt`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    login(loginCredentials.username, loginCredentials.password);\r\n  };\r\n  const onChange = (e) => {\r\n    setLoginCredentials({\r\n      ...loginCredentials,\r\n      [e.currentTarget.id]: e.currentTarget.value,\r\n    });\r\n  };\r\n\r\n  const login = async (user, pass) => {\r\n    await facade.login(user, pass).then((res) => {\r\n      setLoggedIn(facade.loggedIn());\r\n      if (facade.loggedIn()) {\r\n        navigate(\"/\");\r\n      } else {\r\n        setError(\"Invalid username or password\");\r\n        setLoginCredentials(initialState);\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledFormWrapper>\r\n        <StyledForm>\r\n          <StyledInput\r\n            placeholder=\"User Name\"\r\n            id=\"username\"\r\n            onChange={onChange}\r\n            value={loginCredentials.username}\r\n          />\r\n          <StyledInput\r\n            placeholder=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={loginCredentials.password}\r\n            onChange={onChange}\r\n          />\r\n          {error && (\r\n            <StyledError>\r\n              <p>{error}</p>\r\n            </StyledError>\r\n          )}\r\n          <StyledButton onClick={perfomLogin}>Login</StyledButton>\r\n        </StyledForm>\r\n      </StyledFormWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}