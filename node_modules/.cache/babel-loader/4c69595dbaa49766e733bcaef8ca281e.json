{"ast":null,"code":"import _defineProperty from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useState}from'react';// Facade\nimport{facade}from'../../apiFacade';import{signup}from'../../settings';// Styles\nimport{Wrapper,StyledFormWrapper,StyledForm,StyledInput,StyledButton,StyledError}from'./Signup.styles';//Router\nimport{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(_ref){var setLoginCredentials=_ref.setLoginCredentials,setLoggedIn=_ref.setLoggedIn;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),signupCredentials=_useState4[0],setSignupCredentials=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(e){setSignupCredentials(_objectSpread(_objectSpread({},signupCredentials),{},_defineProperty({},e.target.id,e.target.value)));// console.log(signupCredentials);\n};var handleSubmit=function handleSubmit(e){e.preventDefault();axios(\"\".concat(signup),{method:'POST',data:signupCredentials}).then(function(response){setResponse(response.data);if(response.data.status==='success'){facade.login(signupCredentials.username,signupCredentials.password).then(function(){if(sessionStorage.getItem('username')&&facade.loggedIn){setLoginCredentials(signupCredentials);setLoggedIn(true);navigate('/');}});}});};return/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsx(StyledFormWrapper,{children:/*#__PURE__*/_jsxs(StyledForm,{children:[/*#__PURE__*/_jsx(StyledInput,{placeholder:\"User Name\",id:\"username\",onChange:handleChange}),/*#__PURE__*/_jsx(StyledInput,{placeholder:\"Password\",type:\"password\",id:\"password\",onChange:handleChange}),response.message&&/*#__PURE__*/_jsx(StyledError,{children:/*#__PURE__*/_jsx(\"p\",{children:response.message})}),/*#__PURE__*/_jsx(StyledButton,{onClick:handleSubmit,children:\"Sign up\"})]})})});}export default Signup;","map":{"version":3,"sources":["C:/Users/Alek/Dropbox/Dev/3.sem/24h_exam/24h_exam_frontend/src/components/Signup/index.js"],"names":["axios","React","useState","facade","signup","Wrapper","StyledFormWrapper","StyledForm","StyledInput","StyledButton","StyledError","useNavigate","Signup","setLoginCredentials","setLoggedIn","response","setResponse","signupCredentials","setSignupCredentials","navigate","handleChange","e","target","id","value","handleSubmit","preventDefault","method","data","then","status","login","username","password","sessionStorage","getItem","loggedIn","message"],"mappings":"waAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA;AACA,OAASC,MAAT,KAAuB,iBAAvB,CACA,OAASC,MAAT,KAAuB,gBAAvB,CAEA;AACA,OACEC,OADF,CAEEC,iBAFF,CAGEC,UAHF,CAIEC,WAJF,CAKEC,YALF,CAMEC,WANF,KAOO,iBAPP,CASA;AACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,QAASC,CAAAA,MAAT,MAAsD,IAApCC,CAAAA,mBAAoC,MAApCA,mBAAoC,CAAfC,WAAe,MAAfA,WAAe,CACpD,cAAgCZ,QAAQ,CAAC,EAAD,CAAxC,wCAAOa,QAAP,eAAiBC,WAAjB,eACA,eAAkDd,QAAQ,CAAC,EAAD,CAA1D,yCAAOe,iBAAP,eAA0BC,oBAA1B,eACA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA,GAAMS,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BH,oBAAoB,gCACfD,iBADe,wBAEjBI,CAAC,CAACC,MAAF,CAASC,EAFQ,CAEHF,CAAC,CAACC,MAAF,CAASE,KAFN,GAApB,CAIA;AACD,CAND,CAQA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,CAAD,CAAO,CAC1BA,CAAC,CAACK,cAAF,GACA1B,KAAK,WAAII,MAAJ,EAAc,CACjBuB,MAAM,CAAE,MADS,CAEjBC,IAAI,CAAEX,iBAFW,CAAd,CAAL,CAGGY,IAHH,CAGQ,SAACd,QAAD,CAAc,CACpBC,WAAW,CAACD,QAAQ,CAACa,IAAV,CAAX,CACA,GAAIb,QAAQ,CAACa,IAAT,CAAcE,MAAd,GAAyB,SAA7B,CAAwC,CACtC3B,MAAM,CACH4B,KADH,CACSd,iBAAiB,CAACe,QAD3B,CACqCf,iBAAiB,CAACgB,QADvD,EAEGJ,IAFH,CAEQ,UAAM,CACV,GAAIK,cAAc,CAACC,OAAf,CAAuB,UAAvB,GAAsChC,MAAM,CAACiC,QAAjD,CAA2D,CACzDvB,mBAAmB,CAACI,iBAAD,CAAnB,CACAH,WAAW,CAAC,IAAD,CAAX,CACAK,QAAQ,CAAC,GAAD,CAAR,CACD,CACF,CARH,EASD,CACF,CAhBD,EAiBD,CAnBD,CAqBA,mBACE,KAAC,OAAD,wBACE,KAAC,iBAAD,wBACE,MAAC,UAAD,yBACE,KAAC,WAAD,EACE,WAAW,CAAC,WADd,CAEE,EAAE,CAAC,UAFL,CAGE,QAAQ,CAAEC,YAHZ,EADF,cAME,KAAC,WAAD,EACE,WAAW,CAAC,UADd,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,QAAQ,CAAEA,YAJZ,EANF,CAYGL,QAAQ,CAACsB,OAAT,eACC,KAAC,WAAD,wBACE,mBAAItB,QAAQ,CAACsB,OAAb,EADF,EAbJ,cAiBE,KAAC,YAAD,EAAc,OAAO,CAAEZ,YAAvB,qBAjBF,GADF,EADF,EADF,CAyBD,CAED,cAAeb,CAAAA,MAAf","sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react';\r\n\r\n// Facade\r\nimport { facade } from '../../apiFacade';\r\nimport { signup } from '../../settings';\r\n\r\n// Styles\r\nimport {\r\n  Wrapper,\r\n  StyledFormWrapper,\r\n  StyledForm,\r\n  StyledInput,\r\n  StyledButton,\r\n  StyledError,\r\n} from './Signup.styles';\r\n\r\n//Router\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Signup({ setLoginCredentials, setLoggedIn }) {\r\n  const [response, setResponse] = useState('');\r\n  const [signupCredentials, setSignupCredentials] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setSignupCredentials({\r\n      ...signupCredentials,\r\n      [e.target.id]: e.target.value,\r\n    });\r\n    // console.log(signupCredentials);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    axios(`${signup}`, {\r\n      method: 'POST',\r\n      data: signupCredentials,\r\n    }).then((response) => {\r\n      setResponse(response.data);\r\n      if (response.data.status === 'success') {\r\n        facade\r\n          .login(signupCredentials.username, signupCredentials.password)\r\n          .then(() => {\r\n            if (sessionStorage.getItem('username') && facade.loggedIn) {\r\n              setLoginCredentials(signupCredentials);\r\n              setLoggedIn(true);\r\n              navigate('/');\r\n            }\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledFormWrapper>\r\n        <StyledForm>\r\n          <StyledInput\r\n            placeholder=\"User Name\"\r\n            id=\"username\"\r\n            onChange={handleChange}\r\n          />\r\n          <StyledInput\r\n            placeholder=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            onChange={handleChange}\r\n          />\r\n          {response.message && (\r\n            <StyledError>\r\n              <p>{response.message}</p>\r\n            </StyledError>\r\n          )}\r\n          <StyledButton onClick={handleSubmit}>Sign up</StyledButton>\r\n        </StyledForm>\r\n      </StyledFormWrapper>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n"]},"metadata":{},"sourceType":"module"}